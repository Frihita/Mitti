<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Share - Mitti</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body class="bg-[#fff7ed] font-inter text-gray-800 min-h-screen flex flex-col pb-16">
    <custom-navbar></custom-navbar>
    
    <main class="flex-1 px-4 py-6">
        <section class="max-w-4xl mx-auto">
            <h1 class="text-3xl font-bold mb-6 text-[#8b5cf6]">Share Your Story</h1>
            
            <div class="bg-white rounded-xl shadow-md p-6 mb-8">
                <button id="voiceRecordBtn" class="w-full py-4 bg-gradient-to-r from-[#8b5cf6] to-[#f59e0b] text-white rounded-lg font-medium flex items-center justify-center gap-2 mb-4">
                    <i data-feather="mic"></i>
                    <span data-en="Record Voice Story" data-hi="‡§Ü‡§µ‡§æ‡§ú‡§º ‡§ï‡§π‡§æ‡§®‡•Ä ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§ï‡§∞‡•á‡§Ç">Record Voice Story</span>
                </button>
                
                <div class="text-center text-gray-500 mb-6">- or -</div>
                
                <form id="storyForm" class="space-y-4">
                    <div>
                        <label for="title" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                        <input type="text" id="title" name="title" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8b5cf6] focus:border-[#8b5cf6] outline-none transition">
                    </div>
                    
                    <div>
                        <label for="content" class="block text-sm font-medium text-gray-700 mb-1">Your Story</label>
                        <textarea id="content" name="content" rows="5" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8b5cf6] focus:border-[#8b5cf6] outline-none transition"></textarea>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="author" class="block text-sm font-medium text-gray-700 mb-1">Your Name</label>
                            <input type="text" id="author" name="author" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8b5cf6] focus:border-[#8b5cf6] outline-none transition">
                        </div>
                        
                        <div>
                            <label for="village" class="block text-sm font-medium text-gray-700 mb-1">Village/Town</label>
                            <input type="text" id="village" name="village" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8b5cf6] focus:border-[#8b5cf6] outline-none transition">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                        <div class="grid grid-cols-2 gap-3">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="category" value="food" class="text-[#8b5cf6] focus:ring-[#8b5cf6]" checked>
                                <span>üç≤ Food</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="category" value="craft" class="text-[#8b5cf6] focus:ring-[#8b5cf6]">
                                <span>üé® Craft</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="category" value="tradition" class="text-[#8b5cf6] focus:ring-[#8b5cf6]">
                                <span>üé≠ Tradition</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="category" value="song" class="text-[#8b5cf6] focus:ring-[#8b5cf6]">
                                <span>üéµ Song</span>
                            </label>
                        </div>
                    </div>
                    
                    <button type="submit" class="w-full py-3 bg-[#06b6d4] hover:bg-[#0891b2] text-white rounded-lg font-medium transition mt-6 flex items-center justify-center gap-2">
                        <i data-feather="upload"></i>
                        <span data-en="Share Story" data-hi="‡§ï‡§π‡§æ‡§®‡•Ä ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç">Share Story</span>
                    </button>
                </form>
            </div>
            
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-semibold mb-4 text-[#f59e0b]">Recently Shared</h2>
                <div id="recentStories" class="space-y-4">
                    <!-- Recent stories will be loaded here -->
                </div>
            </div>
        </section>
    </main>

    <custom-footer></custom-footer>
    <custom-bottom-nav></custom-bottom-nav>

    <!-- Scripts -->
    <script src="components/navbar.js"></script>
    <script src="components/footer.js"></script>
    <script src="components/bottom-nav.js"></script>
    <script src="script.js"></script>
    <script>
        feather.replace();
        // Set active nav item
        document.addEventListener('DOMContentLoaded', function() {
            const navItems = document.querySelectorAll('custom-bottom-nav .nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.querySelector('.nav-label').textContent === 'Share') {
                    item.classList.add('active');
                }
            });
            
            // Load recent stories from localStorage
            const recentStories = JSON.parse(localStorage.getItem('mittiStories') || '[]');
            const container = document.getElementById('recentStories');
            
            if (recentStories.length === 0) {
                container.innerHTML = '<p class="text-gray-500">No stories shared yet. Be the first to share!</p>';
            } else {
                recentStories.slice(0, 3).forEach(story => {
                    container.innerHTML += `
                        <div class="border-l-4 border-[#8b5cf6] pl-4 py-2">
                            <h3 class="font-medium">${story.title}</h3>
                            <p class="text-sm text-gray-600">${story.content.substring(0, 60)}...</p>
                            <div class="flex items-center mt-2">
                                <div class="w-6 h-6 rounded-full bg-[#f59e0b] flex items-center justify-center text-white text-xs">${story.author.charAt(0)}</div>
                                <div class="ml-2">
                                    <p class="text-xs font-medium">${story.author}</p>
                                    <p class="text-xs text-gray-500">${story.village}</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            // Voice record button functionality
            const voiceBtn = document.getElementById('voiceRecordBtn');
            if (voiceBtn) {
                voiceBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    alert('Voice recording would be implemented with Web Audio API in a real app');
                });
            }
        });
    </script>
</body>
</html>